# PV179 - MusicoStore
Electronic commerce platform with the purpose of selling music-related products such as microphones, DVDs, and instruments.

## Team Information

| Seminar Group | Team Number  |
|---------------|--------------|
| PV179/02      | 4            |

### Members

| Role           | Person           |
|----------------|------------------|
|Team Lead       | Kristián Dobeš   |
|Member          | Tomáš Žilínek    |
|Member          | Petr Balnar      |

## Running the project
### Prerequisites
- [Visual Studio 2022](https://visualstudio.microsoft.com/)
- [.NET SDK](https://dotnet.microsoft.com/en-us/download)

### Steps to Run
1. **Clone the Repository**:
   - using command line or visual studio:
        ```bash
        git clone <repository_url>
        ```
2. **Update the Database**:
   - Run the following command to apply migrations:
     ```bash
     Update-Database -Project DAL.SQLite.Migrations
     ```
3. **Set Startup Project**:
   - In Visual Studio, set `WebMVC` as your startup project.
4. **Run the Application**:
   - Start the application from Visual Studio.

## Application Structure

The application uses Entity Framework Core and consists of following layers:

- `DAL.SQLite.Migrations` - Contains migrations and ModelSnapshot for the SQLite database
- `DataAccessLayer` - Contains definition of application entities, data seeding and setting up the DbContext for EFCore
- `Infrastructure` - Implementation of repository pattern above our DAL layer
- `BusinessLayer` - Contains Services, Facades and its interfaces, DTOs and Mappers for them  
- `WebAPI` - RESTful API interface
- `WebMVC` - .NET MVC web application serving as a frontend (seperate from WebAPI)
- `Tests` - Contains tests for services and facades using NUnit framework and Mocking technique 

## Database
The application uses an [SQLite](https://www.sqlite.org/) database with seeded data generated by [Bogus](https://github.com/bchavez/Bogus). The seeding logic is located in `DataAccessLayer/Data/DataGenerator.cs`.

The same database also saves Logs from application.

## API Endpoints

The application provides the following endpoints:
- **CRUD Operations**: Available for all entities.
- **Filtering**: Filter products by name, description, category, and manufacturer.
- **Category and Manufacturer Management**:
  - Merge categories.
  - Merge manufacturers.
- **Image Handling**:
  - Retrieve product images.
  - Upload images for products.
- **Customer Analysis**:
  - Retrieve the top-selling products.
- and more ...

## Security
The API uses a hard-coded publicly available bearer token for now. This will change in the future since our customers complain about data breaches.

## Testing

### Unit Tests
- **Framework**: NUnit with mocking techniques.
- **Coverage**:
  - `CategoryService`
  - `ManufacturerFacade`
  - `UserService`

### User Testing
- Conducted using the Swagger interface or the MVC application.

## CI/CD Pipeline and Merging rules
We added CI/CD pipeline to our workflow which runs all our tests on our MRs in Docker containers. To be allowed to merge MR, 3 conditions must be met:
- At least 1 approval from another team member
- CI/CD Pipeline passes
- No merge conflicts

## Entity Relationship Diagram
<p align="center">
    <img src="doc/ERD.png" alt="ERD" width="1000"/>
</p>

## Use Case Diagram

<p align="center">
    <img src="doc/UseCaseDiagram.png" alt="UseCaseDiagram" width="400"/>
</p>